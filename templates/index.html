<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CY-Search - Verified ML-guided search for Calabi-Yau targets</title>
    <meta name="description" content="Reproducible pipeline to rank and verify rare targets in Calabi-Yau datasets.">

    <!-- OpenGraph tags -->
    <meta property="og:title" content="CY-Search - Verified ML-guided search">
    <meta property="og:description" content="Reproducible pipeline to rank and verify rare targets in Calabi-Yau datasets.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://compute.upg.gr">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <nav class="nav">
        <div class="container">
            <div class="nav-brand">CY-Search</div>
            <div class="nav-links">
                <a href="/" class="active">Home</a>
                <a href="/demo.html">Interactive Demo</a>
                <a href="/docs.html">Docs</a>
                <a href="/results.html">Results</a>
                <a href="/about.html">About</a>
            </div>
        </div>
    </nav>

    <header class="hero">
        <div class="container">
            <div class="badge">Verified Outputs</div>
            <h1>CY-Search</h1>
            <p class="subtitle">Verified ML-guided search for rare Calabi-Yau targets (string landscape)</p>
            <p class="tagline">We build ML-guided search tools that drastically reduce the cost of finding rare Calabi-Yau geometries in large string-theory datasets, with full verification and reproducibility.</p>
        </div>
    </header>

    <main class="container">
        <section class="section">
            <h2>Run the Demo</h2>
            <p>Click the button below to run a live ML-guided search on 5,000 Calabi-Yau manifolds. Results will appear in ~5-10 seconds.</p>

            <div style="margin: 2rem 0; text-align: center;">
                <button id="run-demo-btn" class="btn btn-primary" style="font-size: 1.125rem; padding: 1rem 2rem;">
                    üöÄ Run Live Demo Now
                </button>
            </div>

            <div id="demo-status" style="display: none; margin-top: 1rem; padding: 1rem; background: #f0f7ff; border-left: 4px solid var(--primary-color); border-radius: 4px;">
                <p id="status-message" style="margin: 0; font-weight: 500;"></p>
            </div>

            <div id="demo-results" style="display: none; margin-top: 2rem;">
                <h3>Search Complete!</h3>
                <div class="metrics-cards" style="margin-top: 1rem;">
                    <div class="metric-card">
                        <div class="metric-value" id="demo-precision">-</div>
                        <div class="metric-label">Precision@100</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="demo-recall">-</div>
                        <div class="metric-label">Recall@100</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="demo-runtime">-</div>
                        <div class="metric-label">Runtime</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="demo-verified">-</div>
                        <div class="metric-label">Verified Targets</div>
                    </div>
                </div>
                <p style="margin-top: 1rem; text-align: center;">
                    <a href="/results.html" class="btn btn-secondary">View Full Results</a>
                </p>
            </div>

            <p class="note" style="margin-top: 2rem;"><strong>For command-line usage:</strong></p>
            <div class="code-block">
                <code>python cy_search_real.py</code>
            </div>
        </section>

        <script>
        document.getElementById('run-demo-btn').addEventListener('click', async function() {
            const btn = this;
            const statusDiv = document.getElementById('demo-status');
            const resultsDiv = document.getElementById('demo-results');
            const statusMsg = document.getElementById('status-message');

            // Disable button
            btn.disabled = true;
            btn.textContent = '‚è≥ Running search...';

            // Show status
            statusDiv.style.display = 'block';
            resultsDiv.style.display = 'none';
            statusMsg.textContent = 'Initializing ML-guided search on 5,000 Calabi-Yau manifolds...';

            try {
                const response = await fetch('/api/run-demo', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        top_k: 100,
                        seed: 42,
                        n_candidates: 5000,
                        verify: true,
                        use_real: true
                    })
                });

                const data = await response.json();

                if (data.status === 'success') {
                    // Show results
                    const metrics = data.results.performance_metrics;
                    const timing = data.results.timing;

                    document.getElementById('demo-precision').textContent =
                        (metrics.precision_at_k * 100).toFixed(1) + '%';
                    document.getElementById('demo-recall').textContent =
                        (metrics.recall_at_k * 100).toFixed(1) + '%';
                    document.getElementById('demo-runtime').textContent =
                        timing.total_runtime_seconds.toFixed(1) + 's';
                    document.getElementById('demo-verified').textContent =
                        metrics.verified_count + '/100';

                    statusDiv.style.display = 'none';
                    resultsDiv.style.display = 'block';
                    btn.textContent = '‚úì Search Complete!';
                } else {
                    statusMsg.textContent = 'Error: ' + (data.message || 'Unknown error');
                    btn.disabled = false;
                    btn.textContent = 'üöÄ Run Live Demo Now';
                }
            } catch (error) {
                statusMsg.textContent = 'Error: ' + error.message;
                btn.disabled = false;
                btn.textContent = 'üöÄ Run Live Demo Now';
            }
        });
        </script>

        <section class="section">
            <h2>What It Does</h2>
            <div class="pipeline">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Download Dataset</h3>
                        <p>Fetch Calabi-Yau dataset with checksum verification</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Train Baseline Model</h3>
                        <p>Train ML classifier with fixed random seed for reproducibility</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Rank Candidates</h3>
                        <p>Score and rank candidates by predicted likelihood</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>Verify Top-k</h3>
                        <p>Validate top results against ground truth labels</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h3>Export Artifacts</h3>
                        <p>Generate CSV/JSON outputs with reproducibility metadata</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Outputs</h2>
            <div class="outputs-grid">
                <div class="output-item">
                    <h3>results_topk.csv</h3>
                    <p>Top-ranked candidates with scores and verification status</p>
                </div>
                <div class="output-item">
                    <h3>metrics.json</h3>
                    <p>Performance metrics and timing data</p>
                </div>
                <div class="output-item">
                    <h3>repro.md</h3>
                    <p>Complete reproducibility report with environment details</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Metrics</h2>
            <div class="metrics-grid">
                <div class="metric-item">
                    <h3>Precision@k</h3>
                    <p>Fraction of top-k predictions that are verified correct</p>
                </div>
                <div class="metric-item">
                    <h3>Recall@k</h3>
                    <p>Fraction of all true targets found in top-k results</p>
                </div>
                <div class="metric-item">
                    <h3>Time-to-First-Hit</h3>
                    <p>How quickly the first verified target is discovered</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Links</h2>
            <div class="links-grid">
                <a href="https://github.com/upggr/compute.upg.gr" class="btn btn-primary" target="_blank" rel="noopener">
                    GitHub Repository
                </a>
                <a href="/docs.html" class="btn btn-secondary">
                    Documentation
                </a>
                <a href="/results.html" class="btn btn-secondary">
                    Latest Demo Artifacts
                </a>
            </div>
        </section>

        <section class="section disclaimer">
            <p><strong>Disclaimer:</strong> This tool accelerates computational search and verification. It does not claim to 'solve string theory'.</p>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>Contact: <a href="mailto:ioannis.kokkinis@upg.gr">ioannis.kokkinis@upg.gr</a> | <a href="https://www.linkedin.com/in/ioanniskokkinis" target="_blank" rel="noopener">LinkedIn</a></p>
            <p class="footer-note">Research tooling for reproducible computational physics experiments</p>
        </div>
    </footer>
</body>
</html>
